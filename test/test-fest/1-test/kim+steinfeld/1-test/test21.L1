(
 (
  (rdx <- 21)    ;; factorial argument
  (call :factorial)
  (rax <- (print rdi))
 )

 (:factorial
  (rsi <- rdx)   ;;counter
  (rsi -= 1)
  (rsi >>= 1)

  (rdi <- 3)     ;;result
  (rdi -= 1)
  (rdi >>= 1)

  :loop
  (cjump 1 < rsi :keep_going :done)

  :keep_going
  (rdi *= rsi)
  (rsi -= 1)
  (goto :loop)

  :done 
  (rdi *= 2)
  (rdi += 1)
  
  (return)
 )
)
